%---------- Inleiding ---------------------------------------------------------

% TODO: Is dit voorstel gebaseerd op een paper van Research Methods die je
% vorig jaar hebt ingediend? Heb je daarbij eventueel samengewerkt met een
% andere student?
% Zo ja, haal dan de tekst hieronder uit commentaar en pas aan.

%\paragraph{Opmerking}

% Dit voorstel is gebaseerd op het onderzoeksvoorstel dat werd geschreven in het
% kader van het vak Research Methods dat ik (vorig/dit) academiejaar heb
% uitgewerkt (met medesturent VOORNAAM NAAM als mede-auteur).
% 

\section{Inleiding}%
\label{sec:inleiding}

Kleine ondernemingen kunnen hun online diensten aanbieden op een simpele, monolitische manier, waarin alles één geheel is. Maar naarmate ondernemingen groeien zal de vraag naar online diensten groeien. Meer gebruikers zullen het online platform gebruiken en het bedrijf wil meer diverse diensten online ter beschikking stellen voor haar gebruikers. Hier kan een monolitische aanpak te kort schieten op bepaalde vlakken.

De ontwikkelaars bij het stagebedrijf Fabrimode nv kwamen met de vraag of het overschakelen van een monolitische architectuur naar een microservices-architectuur nu echt de prestaties van de applicatie verbeteren. Deze bachelorproef zal dan ook vertrekken van deze casus en zal focussen op de schaalbaarheid en complexiteit bij een microservices-architectuur.

De onderzoeksvraag luidt als volgt: Welke impact heeft een microservices-architectuur op de schaalbaarheid en ontwikkelingscomplexiteit op een webapplicatie?

De volgende deelvragen zullen bijdragen tot de conclusie van deze bachelorproef:
\begin{itemize}
	\item Hoe presteert een microservices-architectuur in vergelijking met een monolitische architectuur op het gebied van schaalbaarheid?
	\item Welke aspecten moeten in acht genomen worden bij het overstappen naar een microservices-architectuur?
	\item Welke technologieën en tools zijn essentieel voor het implementeren en beheren van een microservices-architectuur?
\end{itemize}

Het doel van deze bachelorproef zal zijn om op basis van testresultaten inzichten te bieden in de schaalbaarheidsbeperkingen van de huidige architectuur en de voordelen van microservices. Daarnaast zullen er ook richtlijnen zijn om de complexiteit zo minimaal te houden.

%---------- Stand van zaken ---------------------------------------------------

\section{Literatuurstudie}%
\label{sec:literatuurstudie}

Het overschakkelen van een monolitische naar een microservices-architectuur webapplicatie is een complex proces. Daarom is het belangrijk dat ontwikkelaars kennis kunnen opdoen van hoe een microservices-architectuur tot stand komt en wat er allemaal bij komt kijken.

\subsection{Monolitische architectuur}

Allereerst wordt er gekeken naar wat een monolitische architectuur juist is. Volgens \textcite{Velepucha2023} is een monolitische architectuur gekenmerkt door het hebben van slechts 1 enkel startpunt. Daarnaast vermelden \textcite{Velepucha2023} dat een monolitische applicatie doorgaans gekenmerkt wordt door verschillende logische lagen. Een referentie architectuur hiervoor is bijvoorbeeld het 3 lagen patroon \autocite{Velepucha2023}. Hierbij wordt de monolitische applicatie gebouwd in 3 lagen, namelijk de presentatie laag, de domein laag en de data laag, die elk hun verantwoordelijkheid dragen.

\textcite{Blinowski2022} verduidelijken de functie van elk van deze lagen. In de presentatie laag wordt er voornamelijk functionaliteit geplaatst die het voor de gebruiker mogelijk maakt om met de applicatie te interageren. Vervolgens wordt de domein laag gebruikt om te reageren om verzoeken van de gebruiker. Dit kan gaan van het uitvoeren van bepaalde domein logica tot het ophalen van data uit een databron.

Monolitische applicaties kunnen succesvol zijn, maar meer mensen ondervinden begrenzingen aan deze architectuur \autocite{Lewis2014}. Vooral omdat de vraag naar applicaties die in de cloud worden uitgerold stijgt. Wanneer wijzigingen moeten doorgevoerd worden aan een klein onderdeel van de monolitische architectuur vereist dit dat de volledige applicatie opnieuw gebouwd en uitgerold moet worden. Dit kan leiden tot een slechte structuur van de applicatie. Daarnaast benadrukken \textcite{Lewis2014} het feit dat bij het schalen van een monolitische applicatie de volledige applicatie geschaald moet worden, in plaats van slechts een specifiek onderdeel.

\subsection{Microservices-architectuur}


\textcite{Thoenes2015} beschrijft een microservice als een kleine applicatie met één enkele verantwoordelijkheid, die individueel uigerold, geschaald en getest kan worden. Het feit dat een microservice slechts één verantwoordelijkheid heeft kan in twee opzichten bekeken worden \autocite{Thoenes2015}. Ten eerste houdt dit in dat een microservice slechts één reden heeft om te worden gewijzigd of vervangen. En ten tweede betekent deze verantwoordelijkheid dat een microservice slechts één taak uitvoert, die ook nog eens eenduidig is.

De microservices-architectuur is een software architectuur waarbij één enkele applicatie wordt gebouwd die bestaat uit verschillende, kleinere microservices \autocite{Lewis2014}. Deze kleinere services kunnen onafhankelijk van elkaar werken en communiceren met elkaar door gebruik te maken van bijvoorbeeld Hypertext Transfer Protocol (HTTP) of een Application Programming Interface (API). Binnen deze stijl wordt een \hyperref[sec:dissys]{distributed system} opgedeeld in een verzameling van samenhangende, maar zelfstandige services \autocite{Limon2018}.

\subsection{Kenmerken van microservices-\-architectuur}

\textcite{Bakshi2017} identificeert 8 kenmerken van de microservices-architectuur:

\subsubsection{Services opdelen in componenten}

Microservices maken gebruik van componenten die onafhankelijk vervangbaar en uitbreidbaar zijn. Deze componenten/services communiceren via mechanismen zoals webservices of remote procedure calls (RPC).

Het grootste voordeel bij het werken met aparte componenten/services is dat deze services onafhankelijk kunnen ingezet kunnen worden. Waardoor, indien nodig, wijzigingen aan de ene service kunnen aangebracht worden zonder de andere te beïnvloeden.

\subsubsection{Georganiseerd rond bedrijfsfunctionaliteiten}

Microservices worden ontworpen met een focus op bedrijfsfunctionaliteiten. Hierbij moet gekeken worden naar een brede implementatie van software voor een specifiek bedrijfsdomein, dit omvat een gebruikersinterface, persistente opslag en externe samenwerkingen.

Dit resulteert in cross-functionele teams, waarbij skills m.b.t. gebruikservaring, databanken en projectmanagement essentieel zijn.

\subsubsection{Gebruik van Continuous Integration/Continuous Deployment}

Applicatieontwikkeling met microservices maakt gebruik van het CI/CD proces, waarbij software voortdurend wordt ontwikkeld en functies worden toegevoegd. Dit proces omvat een ontwikkel-, test-, staging- en productieomgeving.

De monolitische aanpak legt voornamelijk de focus op het afleveren van compleet afgewerkte software. Deze software wordt overgedragen aan de klant en het projectteam gaat over naar een nieuw project.

\subsubsection{Intelligente services en eenvoudige communicatie}

Traditioneel wordt er voor communicatiesysteem gekeken naar een Enterprise Service Bus (ESB). Deze aanpak brengt echter heel wat complexiteit met zich mee. Meer details over de werking van een ESB is terug te vinden in de sectie \hyperref[sec:soa]{Service-oriented architecture}.

Microservices daarentegen gebruiken communicatieprotocollen zoals Representational State Transfer (REST). Hierdoor bevindt de logica zich in de services (smart endpoints) en gebeurt de communicatie op een eenvoudige manier (dumb pipes).

\subsubsection{Automatisering van de infrastructuur}

De automatisering van infrastructuur is essentieel, bijvoorbeeld om automatisch implementaties te realiseren in diverse omgevingen en microservices te beheren in productie.

\subsubsection{Fouttolerantie en monitoring}

Een microservices-architectuur moet ontworpen worden zodat wanneer een individuele service uitvalt de applicatie als geheel niet faalt.

Real-time monitoring speelt hierin een cruciale rol.

\subsubsection{Decentralisatie van logica en data}

Eerder werd al vermeld dat de microservices-architectuur werkt met onafhankelijke services die elk hun verantwoordelijkheid hebben. Een belangrijk hulpmiddel bij het maken van services is het Domain Driven Design (DDD) principe. 

Binnen DDD wordt een complex domein opgesplitst in kleinere contexten, die elk een eigen verantwoordelijkheid hebben. Deze contexten werken samen, maar zijn onafhankelijk van elkaar.

Daarnaast decentraliseert een microservices-architectuur de manier waarop data wordt opgeslagen en beheert. Monolitische applicaties gebruiken grotendeels één databank. Microservices opteren om elke services zijn eigen databank te laten beheren. Deze aanpak wordt ook wel Polyglot Persistence genoemd.

Bij Polyglot Persistence worden verschillende databanksystemen gebruikt in één applicatie \autocite{RoyHubara2022}.

\subsubsection{Flexibiliteit in technologiekeuze}

Doordat services onafhankelijk zijn, kunnen deze ontwikkeld worden met de meest geschikte programmeertaal of technologie, zoals Node.js, Python, Java of C++.

\subsection{Service-oriented architecture}
\label{sec:soa}

Volgens \textcite{Rojas2021} wordt een service-oriented architectuur (SOA) gedefinieerd als een architectuurstijl dat is ontworpen voor het creëren van een losse verbinding tussen systemen. De SOA stijl bestaat uit serviceproviders en -consumenten die met elkaar samenwerken via een vooraf overeengekomen interface. 

De afgelopen jaren heeft de service-oriented architectuur steeds meer aandacht gekregen \autocite{Niknejad2020}. Het migreren naar SOA systemen is een trend geworden om software-omgevingen te moderniseren. SOA biedt voordelen voor technologieën zoals het Internet of Things (IoT), Cloud Computing (CC) en microservices, door flexibele integratie en herbruikbare services.

Ondanks dat zowel de microservices architectuur als SOA gebruikmaken van services, verschillen de communicatiestructuren \autocite{Blinowski2022}. Bij SOA is de communicatie vaak gebaseerd op een mechanisme zoals de Enterprise Service Bus (ESB), die functionaliteiten biedt als berichtroutering en filtering. Het gebruik van een ESB is vaak ``zwaar'' en complex. 

Microservices daarentegen zorgen ervoor dat de communicatiestructuur van de services eenvoudiger is \autocite{Blinowski2022}. De services van een microservices architectuur maken gebruik van standaard internetprotocollen zoals Hypertext Transfer Protocol (HTTP) en Representational State Transfer (REST), daarnaast kan er ook gebruikgemaakt worden van protocollen zoals Java Message Service (JMS) of Advanced Message Queuing Protocol (AMQP) voor berichtenverkeer.

\subsubsection{Enterprise Service Bus}

De Enterprise Service Bus (ESB) heeft volgens \textcite{Aziz2020} de afgelopen jaren aan populariteit gewonnen binnen de IT-industrie vanwege de veilige en gegarandeerde beschikbaarheid van services. Talloze applicaties kunnen via de ESB informatie met elkaar uitwisselen. Hierdoor wordt de ESB een belangrijke middlewarelaag binnen een SOA, die verantwoordelijk is voor het overbrengen van informatie. 

Het gebruik van een ESB in een service-oriented architectuur zorgt er voor dat de verschillende services zeer strikt gekoppeld zijn met de middleware en dat de ESB een "single point of failure" wordt \autocite{Raj2021}.

\subsection{Distributed Systems}
\label{sec:dissys}

Volgens \textcite{Steen2018} worden distributed systems gedefinieerd als een verzameling van autonome computationele elementen die voor gebruikers als één samenhangend systeem lijkt te functioneren.

Deze definitie benadrukt twee kenmerken van distributed systems \autocite{Steen2018}. Het eerste kenmerk is dat een distributed systems bestaat uit een verzameling computationele elementen die onafhankelijk van elkaar kunnen functioneren. Deze computationele elementen kunnen zowel hardware-apparaten als softwareprocessen zijn. Het tweede kenmerk is dat gebruikers, zowel mensen als applicaties, de indruk hebben dat ze met één samenhangend systeem te maken hebben. Dit benadrukt dat de elementen op de een of andere manier moeten samenwerken. Hoe deze samenwerking tot stand komt is de kern van distributed systems.

Distributed systems zijn de afgelopen twee decennia in trek door de groeiende vraag naar onafhankelijke ontwikkeling en implementatie van webapplicaties \autocite{Raj2021}. Dit soort systemen worden essentieel voor het snel leveren van diensten met behulp van continuous integration en continuous development (CI/CD). Eén van de basisarchitecturen van distributed systems is SOA, hierbij staan services centraal in het ontwerp.

% Voor literatuurverwijzingen zijn er twee belangrijke commando's:
% \autocite{KEY} => (Auteur, jaartal) Gebruik dit als de naam van de auteur
%   geen onderdeel is van de zin.
% \textcite{KEY} => Auteur (jaartal)  Gebruik dit als de auteursnaam wel een
%   functie heeft in de zin (bv. ``Uit onderzoek door Doll & Hill (1954) bleek
%   ...'')

%---------- Methodologie ------------------------------------------------------

\section{Methodologie}%
\label{sec:methodologie}

In de initiële fase van het onderzoek zal er een uitgebreide literatuurstudie worden uitgevoerd. De bedoeling van deze fase is om inzicht te krijgen in het onderwerp en het probleemdomein van deze bachelorproef.

In een volgende fase zal er onderzoek worden gedaan naar de meest toepasselijke programmeertalen en frameworks om een proof-of-concept (PoC) uit te werken. Hierbij wordt er ook aandacht geschonken aan containerisatietools, namelijk Docker en Kubernetes, die het mogelijk maken om microservices onafhankelijk te ontwikkelen, testen en te beheren.

In de derde fase van het onderzoek wordt een effectieve PoC uitgewerkt. Voor deze PoC wordt er beroep gedaan op de technologieën die het best uit literatuurstudie naar voorkomen. In een eerste stap, zal een monolitische e-commerce webapplicatie gebouwd worden. In een volgende stap wordt diezelfde webapplicatie omgezet naar een applicatie met een microservices-architectuur. Hierbij zal er rekeninggehouden worden met de best-practices voor het ontwerpen van een microservices-architectuur.

In de daaropvolgende fase zullen de schaalbaarheid en de complexiteit van beide webapplicaties getest worden. Voor de schaarbaarheidstesten zal er gebruik gemaakt worden van Apache JMeter. Deze gratis open-source software maakt het mogelijk om simulaties van hoge belasting uit te voeren, zodat de prestaties onder intensief gebruik van de beide applicaties kunnen vergeleken worden. Daarnaast wordt de complexiteit beoordeeld door het meten van de cyclomatische complexiteit. Hiervoor wordt gebruik gemaakt van de gratis versie van SonarQube. Met behulp van deze tool wordt een grondige analyse uitgevoerd om een beeld te krijgen van de complexiteit van de webapplicaties.

Tot slot zullen de resultaten van de Apache JMeter testen en de SonarQube analyse van beide webapplicaties worden geanalyseerd om conclusies te trekken over de schaalbaarheid en complexiteit van de microservices-architectuur ten opzichte van de monolitische aanpak.

%---------- Verwachte resultaten ----------------------------------------------
\section{Verwacht resultaat, conclusie}%
\label{sec:verwachte_resultaten}

Na het ontwikkelen van de PoC en het uitvoeren van de schaalbaarheidstesten zullen de resultaten waarschijnlijk aantonen dat doormiddel van een microservices-architectuur de webapplicatie beter presteert bij hoge belasting. Tegelijkertijd wordt verwacht dat de webapplicatie met de microservices-architectuur een toenemende complexiteit met zich meebrengt ten opzichte van de monolitische webapplicatie. Dit zal blijken uit de complexiteitsanalyse door SonarQube.

Voor de ontwikkelaars bij Fabrimode is de meerwaarde te vinden in de inzichten en resultaten die deze bachelorproef te bieden heeft. Deze bevindingen kunnen door Fabrimode in acht genomen worden wanneer zij beslissen om al dan niet een project op te starten die de overgang naar een microservices-architectuur uitvoert.

